class ApiV2Controller < ActionController::Base

  before_action :authenticate

  def authenticated? 
    user,password= ActionController::HttpAuthentication::Basic.user_name_and_password(request)
    application= API::Application.find_by(id: user) and application.secret == password
  end
  
  def authenticate!
  end

  class Index
    def welcome_message
      "Welcome to the MAdeK API!"
    end
  end

  def show
    respond_to do |format|
      format.json do
        render json: API_V2::IndexRepresenter.new(Index.new).as_json 
      end
      format.html do
        redirect_to "/api-browser/browser.html#/api_v2/"
      end
    end
  end

end


